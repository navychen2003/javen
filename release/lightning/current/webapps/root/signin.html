<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=9; IE=8; IE=7; IE=EDGE">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Anybox is a backup, share, sync, access and storage service. Online and multi-platform with 5GB of storage free for life.">
	<meta name="keywords" content="free storage, multi-platform, mobile access, windows, mac, osx, android, iOS">
	<meta name="author" content="Anybox.org">
    <meta name="google-site-verification" content="">
    <meta name="robots" content="index, follow">
    <meta name="msvalidate.01" content=""> 
	<meta name="apple-itunes-app" content="app-id=">

	<link rel="stylesheet" href="css/bootstrap.css" type="text/css">
	<link rel="stylesheet" href="css/font-awesome.css" type="text/css">
	<link rel="stylesheet" href="css/ss-social.css" type="text/css">
	<link rel="stylesheet" href="css/ss-standard-optimized.css" type="text/css">
	<link rel="stylesheet" href="css/proxima_nova_kit.css" type="text/css">

    <title id="id-title">Anybox - Official Site</title>
	<link rel="stylesheet" href="css/style.css" type="text/css">
	
	<script src="js/jquery-1.10.2.min.js" type="text/javascript"></script>
	<script src="js/bootstrap.js" type="text/javascript"></script>
	<script src="js/jquery.fitvids.js" type="text/javascript"></script>
	<script src="js/jquery.cookie.js" type="text/javascript"></script>
	<!--[if lt IE 9]>
		<script src="js/html5shiv.js"></script>
	    <script src="js/respond.js" type="text/javascript"></script>
	<![endif]--> 
	
	<style id="fit-vids-style">
	    .fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}
	</style>
</head>
<body>

<div id="so-base-header-wrapper">
  <div class="container" id="so-base-header">
    <nav class="navbar" role="navigation">
      <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#so-base-navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/"><img src="img/logo.png" alt="Anybox"></a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="so-base-navbar">
          <ul class="item-main-nav nav navbar-nav">
            <li class="dropdown">
              <a href="features.html" class="dropdown-toggle"><span id="id-topnav-features">Features</span> <i class="ss-icon ss-navigatedown"></i></a>
              <ul class="dropdown-menu">
                <li><a href="features.html" id="id-dropdown-features">Features Overview</a></li>
                <li><a href="webapp.html" id="id-dropdown-webapp">Web Application</a></li>
                <li><a href="mobile.html" id="id-dropdown-mobile">Mobile</a></li>
              </ul>
            </li>
            <li class="no-dropdown"><a href="pricing.html" class="" id="id-topnav-pricing">Pricing</a></li>
            <li class="no-dropdown"><a href="help.html" class="" id="id-topnav-support">Support</a></li>
          </ul>
          <ul class="item-sub-nav nav navbar-nav navbar-right">
            <li class="item-signin"><a href="signin.html" id="id-topnav-signin">Sign In</a></li>
            <li><a href="signup.html" class="btn so-btn" id="id-topnav-signup">Try For Free</a></li>
          </ul>
        </div><!-- /.navbar-collapse -->
      </div><!-- /.container-fluid -->
    </nav>
  </div>
</div>

<div class="container so-heading">
  <div class="row">
    <div class="col-lg-12">
      <h1 id="id-subject">Welcome Back.</h1>
      <p class="text" id="id-description">Sign in below to access your account.</p>
    </div>
  </div>
</div>

<div class="container so-extra-padding">
  <div class="row">
    <div class="col-md-4 col-md-offset-1">
      <noscript>
        &lt;div class="noscript"&gt;
          &lt;div&gt;
            &lt;h3&gt;Error: Scripting Disabled&lt;/h3&gt;
            &lt;p&gt;This page requires JavaScript to operate properly.&lt;/p&gt;
            &lt;p&gt;Please use a compatible browser or enable JavaScript.&lt;/p&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      </noscript>
      <div class="so-form" id="form">
          <form id="login" method="post">
            <div class="item-error-message">
            </div>

            <div class="item">
              <label id="id-label-username">Username</label>
              <div>
                <input type="text" name="username" id="id_username" tabindex="1" parsley-required="true" parsley-minlength="4" parsley-maxlength="38" parsley-required-message="This field is required" parsley-minlength-message="Must be at least 4 characters" parsley-maxlength-message="Must be at most 38 characters" parsley-trigger="change focusout" class="parsley-validated">
              </div>
            </div>

            <div class="item">
              <label><span id="id-label-password">Password</span> <a href="resetpwd.html" id="id-resetpwd">Forgot Password?</a></label>
              <div>
                <input type="password" name="password" id="id_password" tabindex="2" parsley-required="true" parsley-required-message="This field is required" class="parsley-validated">
              </div>
            </div>

            <div class="item item-confirm">
              <input type="checkbox" id="id_confirm" tabindex="3" parsley-required="true" parsley-group="confirm" parsley-required-message="Please confirm" class="parsley-validated">
              <p><span id="id-desc-confirm">I understand that for complete privacy.</span> <a href="help.html" id="id-learnmore">Learn More</a></p>
            </div>
          
            <button id="login_btn" class="btn so-btn so-btn-primary" tabindex="4">Login</button>
            <div class="item-form-loading"><img src="img/indicator.gif" alt="Loading..."></div>
          </form>
      </div>
    </div>
    <div class="col-md-5 col-md-offset-1">
      <div class="so-small-whatsincluded">
        <div class="item item-access">
          <h4 id="id-subject-download">On the go?</h4>
          <p id="id-desc-download">Download the Anybox <a href="http://itunes.apple.com/" target="_blank">iPhone</a> or <a href="https://play.google.com/" target="_blank">Android</a> mobile app to access your data from anywhere.</p>
        </div>
        <div class="item item-share">
        </div>
      </div>
    </div>
  </div>
</div>

<div id="so-base-footer">
	<div class="container">
		<div class="row">
			<div class="col-md-5">
			</div>
			<div class="col-md-7">
				<ul class="pull-right item-footer-nav">
					<li><a href="agreement.html" id="id-ftnav-agreement">Service Agreement</a></li>
					<li>|</li>
					<li><a href="privacy.html" id="id-ftnav-privacy">Privacy Policy</a></li>
					<li>|</li>
					<li><a href="terms.html" id="id-ftnav-terms">Terms of Use</a></li>
					<li>|</li>
					<li><a href="law.html" id="id-ftnav-law">Law Enforcement</a></li>
				</ul>
			</div>
		</div>
	</div>
</div>

<script src="js/parsley.js" type="text/javascript"></script>
<script src="js/i18n.js" type="text/javascript"></script>
<script src="js/site.js" type="text/javascript"></script>
<script type="text/javascript">

(function($) {
  $(function() {
    var queryString = window.location.search.substring(1); 
    var queryPairs = queryString.split("&"); 
    var queryParams = {};
    for (var i = 0; i < queryPairs.length; i++) {
      var nameVal = queryPairs[i].split("=");
      queryParams[nameVal[0]] = decodeURIComponent(nameVal[1]);
    }
    
    var lang = queryParams['lang'];
    if (lang == null || lang.length == 0)
      lang = $.cookie( 'lightning.login.lang' );
    if (lang == null || lang.length == 0)
      lang = navigator.language ? navigator.language : navigator.userLanguage;
    
    lang = strings.init(lang);
    $.cookie( 'lightning.login.lang', lang );
    
    $('#id-title').html(strings.get(lang, 'Anybox - Official Site'));
    $('#id-topnav-features').html(strings.get(lang, 'Features'));
    $('#id-dropdown-features').html(strings.get(lang, 'Features Overview'));
    $('#id-dropdown-webapp').html(strings.get(lang, 'Web Application'));
    $('#id-dropdown-mobile').html(strings.get(lang, 'Mobile'));
    $('#id-topnav-pricing').html(strings.get(lang, 'Pricing'));
    $('#id-topnav-support').html(strings.get(lang, 'Support'));
    $('#id-topnav-signin').html(strings.get(lang, 'Sign In'));
    $('#id-topnav-signup').html(strings.get(lang, 'Try For Free'));
    $('#id-ftnav-agreement').html(strings.get(lang, 'Service Agreement'));
    $('#id-ftnav-privacy').html(strings.get(lang, 'Privacy Policy'));
    $('#id-ftnav-terms').html(strings.get(lang, 'Terms of Use'));
    $('#id-ftnav-law').html(strings.get(lang, 'Law Enforcement'));
    
    $('#id-subject').html(strings.get(lang, 'Welcome Back.'));
    $('#id-description').html(strings.get(lang, 'Sign in below to access your account.'));
    $('#id-subject-download').html(strings.get(lang, 'On the go?'));
    //$('#id-desc-download').html(strings.get(lang, ''));
    $('#id-desc-confirm').html(strings.get(lang, 'I understand that for complete privacy.'));
    $('#id-learnmore').html(strings.get(lang, 'Learn More'));
    $('#id-resetpwd').html(strings.get(lang, 'Forgot Password?'));
    
    $('#id-label-username').html(strings.get(lang, 'Username'));
    $('#id-label-password').html(strings.get(lang, 'Password'));
    $('#login_btn').html(strings.get(lang, 'Login'));
    
    var xhr_status_messages = {
      402: strings.get(lang, 'This account is suspended. Please contact support.'),
      400: strings.get(lang, 'Incorrect username or password.')
    };
    var error_messages = {
      password_incorrect: strings.get(lang, 'Incorrect username or password'),
      server_error: strings.get(lang, 'Temporary server failure. Please try again in a few minutes')
    };

    function remote_login(login_info, url, failure_cb) {
      var options = {
        url: url || '/lightning/user/login?action=login&wt=json'
      };
      options.type = 'POST';
      options.dataType = 'json';
      options.data = login_info;
      
      options.success = function (data) {
        var match = data && data.user && data.system;
        if (match) {
          var user = data.user;
          var system = data.system;
          
          var scheme = system.scheme;
          var httpport = system.httpport;
          var httpsport = system.httpsport;
          var hostdomain = system.domain;
          var hostaddr = system.hostaddr;
          var hostkey = system.hostkey;
          
          var userkey = user.key;
          var username = user.name;
          var token = user.token;
          
          if (hostdomain == null || hostdomain.length == 0)
            hostdomain = hostaddr;
          
          if (hostdomain != null && hostkey != null && userkey != null && token != null) {
            var hosturl;
            if (scheme == 'https') {
              hosturl = 'https://' + hostdomain;
              if (httpsport != 443 && httpsport > 0) 
                hosturl += ':' + httpsport;
            } else {
              hosturl = 'http://' + hostdomain;
              if (httpport != 80 && httpport > 0) 
                hosturl += ':' + httpport;
            }
            
            var authtoken = hostkey + userkey + token;
            var redirecturl = hosturl + '/library/#/~signin/' + authtoken;
            
            window.location.href = redirecturl;
            return;
          }
        }
		if (data.error && data.error.code && data.error.msg) {
		  failure_cb(data.error.msg, data.error);
		  return;
		}
        failure_cb(error_messages.server_error);
      };
      options.error = function (xhr) {
        if (xhr) {
          var error = null;
          if (xhr.responseJSON) error = xhr.responseJSON.error;
          failure_cb(xhr_status_messages[xhr.status], error);
        } else {
          failure_cb(error_messages.server_error);
        }
      };
      $.ajax(options);
    }

    var add_parsley = function($form, fielddefs) {
      for (var key in fielddefs) {
        var def = fielddefs[key];
        for (var attr in def) {
          $form.find("#id_" + key).attr("parsley-" + attr, def[attr]);
        }
      }
    };

    var init_login = function($form) {
      add_parsley($form, {
        "username": {
          "required": "true",
          "minlength": 4,
          "maxlength": 38,
          "required-message": strings.get(lang, "This field is required"),
          "minlength-message": strings.get(lang, "Must be at least 4 characters"),
          "maxlength-message": strings.get(lang, "Must be at most 38 characters"),
          "trigger": "change focusout"
        },
        "password": {
          "required": "true",
          "required-message": strings.get(lang, "This field is required")
        },
        "confirm": {
          "required": "true",
          "group": "confirm",
          "required-message": strings.get(lang, "Please confirm")
        }
      });
    };

    var $form;
    var submitForm;
    var doFocus;
    var $login_form = $("#login");
    if ($login_form.length) {
      init_login($login_form);
      $form = $login_form;
      submitForm = function(failure_cb) {
        var username = $('input[name=username]', $form).val();
        var password = $('input[name=password]', $form).val();
        
        var loginlang = lang; 
        var apptype = 'web';
        var appname = navigator.appName;
        var appversion = navigator.appVersion;
        var applang = navigator.language ? navigator.language : navigator.userLanguage;
        var secret = encodeSecret(password);
        
        if (loginlang == null) loginlang = '';
        if (appname == null) appname = 'unknown';
        if (appversion == null) appversion = 'unknown';
        if (applang == null) applang = '';
        
        var login_info = {username: username, secret: secret, 
            lang: loginlang, apptype: apptype, appname: appname, 
            appversion: appversion, applang: applang};
        
        remote_login(login_info, null, failure_cb);
      };
      doFocus = function() {
        if ($.trim($('#id_username').val()).length === 0) {
          $('#id_username').focus();
        } else {
          $('#id_password').val("").focus();
        }
      };
      doFocus();
    }

    $form.parsley({
      successClass: "success",
      errorClass: "error",
      animate: false,
      messages: strings.parsley_messages,
      errors: {
        classHandler: function(e) {
          return $(e).parent();
        },
        errorsWrapper: "<p></p>",
        errorElem: "<span></span>"
      }
    });

    var _disabled = false;
    var disableForm = function() {
      _disabled = true;
      $("#login_btn").hide();
      $(".item-form-loading").show();
      $(".item-error-message").hide();
    };

    var enableForm = function() {
      _disabled = false;
      $("#login_btn").show();
      $(".item-form-loading").hide();
    };

    var failure_cb = function(msg, error) {
      msg = strings.geterror(lang, error, msg);
      $(".item-error-message").text(msg).show();
      enableForm();
      doFocus();
    };

    $form.on("submit", function(evt) {
      evt.preventDefault();
      if (_disabled) return;
      if ($form.parsley('validate')) {
        disableForm();
        submitForm(failure_cb, function(msg) {
          $(".item-error-message").text(msg).show();
          enableForm();
          doFocus();
        });
      }
    });
  });
})($);
</script>

</body>
</html>